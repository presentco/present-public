<queue-entries>
  <!--
    This defines the APNS push notification queue, which receives APNSNotificationTasks
    in the api module.
    Note: Queues are defined in the (default) web module even though this queue is targeted to run in api module.
    The rate can be high since these tasks don't contend on the datastore.
  -->
  <queue>
    <name>apns</name>
    <rate>500/s</rate>
    <!-- Recommended rate/5 -->
    <bucket-size>100</bucket-size>
    <retry-parameters>
        <task-age-limit>3h</task-age-limit>
        <min-backoff-seconds>10</min-backoff-seconds>
        <max-backoff-seconds>600</max-backoff-seconds>
        <max-doublings>5</max-doublings>
    </retry-parameters>
    <target>api</target>
  </queue>

  <!--
    This defines the APNS push notification test queue.  Notifications generated by tests set the test payload flag
    and are deposited into this pull queue instead of the real APNS outbound push queue.
  -->
  <queue>
    <name>apns-test</name>
    <mode>pull</mode>
  </queue>

  <!--
    Rate limited queue used to send summary emails.
  -->
  <queue>
    <name>emails</name>
    <rate>15/s</rate>
    <!-- Recommended rate/5 -->
    <bucket-size>3</bucket-size>
    <retry-parameters>
      <task-retry-limit>1</task-retry-limit>
    </retry-parameters>
    <target>api</target>
  </queue>


</queue-entries>

